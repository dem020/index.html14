<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–í–∫—É—Å –°–°–°–† - –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icon-192.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#d32f2f">

  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: #f5f5f5;
      padding: 20px;
    }
    .container {
      max-width: 500px;
      margin: auto;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    h1 {
      text-align: center;
      color: #d32f2f;
      margin-bottom: 20px;
    }
    input, button {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    button {
      background-color: #e57373;
      color: white;
      cursor: pointer;
      border: none;
    }
    button:hover {
      background-color: #c62828;
    }
    .info {
      background: #fafafa;
      padding: 15px;
      margin-top: 20px;
      border-radius: 8px;
    }
    ul {
      list-style: none;
      padding-left: 0;
    }
    li {
      padding: 5px 0;
    }
    .gifts {
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üë§ –ú–æ—è –∫–∞—Ä—Ç–∞ "–í–∫—É—Å –°–°–°–†"</h1>

    <input type="text" id="phoneInput" placeholder="+7 (___) ___-__-__" />
    <button onclick="checkCard()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞—Ä—Ç—É</button>

    <div class="info" id="cardInfo" style="display: none;">
      <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> <span id="customerPhone"></span></p>
      <p><strong>–ë–∞–ª–ª—ã:</strong> <span id="customerPoints">0</span></p>

      <h4>–ò—Å—Ç–æ—Ä–∏—è –ø–æ–∫—É–ø–æ–∫:</h4>
      <ul id="customerHistory"></ul>

      <div class="gifts">
        <h4>üéÅ –û–±–º–µ–Ω –±–∞–ª–ª–æ–≤:</h4>
        <ul>
          <li>100 –±–∞–ª–ª–æ–≤ = 50 ‚ÇΩ</li>
          <li>200 –±–∞–ª–ª–æ–≤ = 100 ‚ÇΩ</li>
          <li>500 –±–∞–ª–ª–æ–≤ = 250 ‚ÇΩ</li>
        </ul>
      </div>
    </div>
  </div>

  <script>
    function checkCard() {
      const phone = document.getElementById("phoneInput").value.trim();
      const customers = JSON.parse(localStorage.getItem("customers")) || {};
      const infoDiv = document.getElementById("cardInfo");
      const phoneEl = document.getElementById("customerPhone");
      const pointsEl = document.getElementById("customerPoints");
      const historyList = document.getElementById("customerHistory");

      if (!phone) {
        alert("–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞!");
        return;
      }

      if (customers[phone]) {
        const data = customers[phone];
        phoneEl.textContent = phone;
        pointsEl.textContent = data.points;

        // –ò—Å—Ç–æ—Ä–∏—è
        historyList.innerHTML = "";
        if (data.history && data.history.length > 0) {
          data.history.forEach(entry => {
            const li = document.createElement("li");
            li.textContent = `${entry.text} (${entry.points})`;
            historyList.appendChild(li);
          });
        } else {
          historyList.innerHTML = "<li>–ù–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏</li>";
        }

        infoDiv.style.display = "block";
      } else {
        alert("–ö–∞—Ä—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞.");
      }
    }
  </script>
</body>
</html>